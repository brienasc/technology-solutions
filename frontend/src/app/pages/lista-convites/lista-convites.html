<div class="lista-convites-container card">
    <div class="controls-section">
        <div class="filter-group">
            <label for="status-filter">Filtrar por Status:</label>
            <select id="status-filter" [(ngModel)]="statusFilter" (change)="applyFilter()">
                <option value="all">Todos</option>
                <option value="Em Aberto">Em Aberto</option>
                <option value="Finalizado">Finalizado</option>
                <option value="Vencido">Vencido</option>
            </select>
        </div>

        <div class="search-group">
            <label for="email-search">Buscar por E-mail:</label>
            <input type="text" id="email-search" placeholder="Digite o e-mail do convidado" [(ngModel)]="emailFilter">
            <button (click)="applyFilter()">Buscar</button>
        </div>
    </div>

    <div class="table-section">
        <table>
            <thead>
                <tr>
                    <th>E-mail do Convidado</th>
                    <th>Data de Envio</th>
                    <th>Data de Expiração</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let invitation of invitations">
                    <td>{{ invitation.email_colab }}</td>
                    <td>{{ invitation.created_at | date: 'dd/MM/yyyy' }}</td>
                    <td>{{ invitation.expires_at | date: 'dd/MM/yyyy' }}</td>
                    <td>
                        <span class="status-badge" [ngClass]="{
                                'status-em-aberto': invitation.status_code === 0,
                                'status-finalizado': invitation.status_code === 1,
                                'status-vencido': invitation.status_code === 2
                            }">
                            {{ invitation.status_description }}
                        </span>
                    </td>
                </tr>
                <tr *ngIf="invitations.length === 0">
                    <td colspan="4" class="no-data-message">Nenhum convite encontrado.</td>
                </tr>
            </tbody>
        </table>
    </div>

    <mat-paginator [length]="totalItems" [pageSize]="pageSize" [pageIndex]="currentPage - 1" [pageSizeOptions]="pageSizes" (page)="handlePageEvent($event)" aria-label="Selecione a página de convites">
    </mat-paginator>
</div>