<!-- frontend/src/app/pages/convites/convites.component.html -->
<app-header></app-header>

<div class="convites-container">
    <!-- <label class="theme-switch">
    <input type="checkbox" [checked]="isDarkTheme" (change)="toggleTheme()">
    <span class="slider round"></span>
  </label> -->
    <div class="header-section">
        <div class="header-text-group">
            <h1>Menu Convites</h1>
            <p class="subtitle">Gerencie seus convites de colaboradores</p>
        </div>
        <button class="create-invite-button" (click)="onCreateNewInvite()">
            <!-- <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
            </svg> -->
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5">
          <path d="M5.25 6.375a4.125 4.125 0 1 1 8.25 0 4.125 4.125 0 0 1-8.25 0ZM2.25 19.125a7.875 7.875 0 0 1 15.75 0v.003l-.001.119a.75.75 0 0 1-.363.63 13.067 13.067 0 0 1-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 0 1-.364-.63l-.001-.122ZM18.75 7.5a.75.75 0 0 0-1.5 0v2.25H15a.75.75 0 0 0 0 1.5h2.25v2.25a.75.75 0 0 0 1.5 0v-2.25H21a.75.75 0 0 0 0-1.5h-2.25V7.5Z" />
        </svg>
            Criar Novo Convite 
        </button>

    </div>

    <!-- Componente filho para a listagem, filtros e paginação -->
    <app-lista-convites [invitations]="invitations" [totalItems]="totalItems" [pageSize]="pageSize" [currentPage]="currentPage" [statusFilter]="statusFilter" [emailFilter]="emailFilter" (filterApplied)="onFilterApplied($event)" (pageChanged)="onPageChange($event)"
        (pageSizeChanged)="onPageSizeChange($event)"></app-lista-convites>

    <button class="back-button" (click)="goBack()">Voltar</button>


    <!--Estrutura do Modal de Criar Convite -->
    <div class="modal-overlay" [class.active]="showInviteDialog" (click)="closeInviteDialog()"></div>
    <div class="modal-dialog" [class.active]="showInviteDialog">
        <!-- <div class="modal-header">
            <h2>Convidar Novo Colaborador</h2>
            <button class="close-modal-btn" (click)="closeInviteDialog()">×</button>
        </div> -->
        <div class="modal-header">
            <svg class="modal-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path d="M1.5 8.67v8.58a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V8.67l-8.928 5.493a3 3 0 0 1-3.144 0L1.5 8.67Z" />
            <path d="M22.5 6.908V6.75a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3v.158l9.714 5.978a1.5 1.5 0 0 0 1.572 0L22.5 6.908Z" />
        </svg>
            <h2>Convidar Colaborador</h2>
            <button class="close-modal-btn" (click)="closeInviteDialog()">×</button>
        </div>
        <div class="modal-body">
            <form (ngSubmit)="sendInvite()">
                <div class="form-group">
                    <label for="inviteEmail">E-mail do Colaborador:</label>
                    <input type="email" id="inviteEmail" [(ngModel)]="inviteEmail" name="inviteEmail" placeholder="nome@exemplo.com" (ngModelChange)="onEmailChange()" [class.is-invalid]="inviteErrorMessage && !isValidEmail">
                    <div *ngIf="inviteErrorMessage" class="invalid-feedback">
                        {{ inviteErrorMessage }}
                    </div>
                </div>
                <div class="modal-actions">
                    <button type="button" class="cancel-button" (click)="closeInviteDialog()">Cancelar</button>
                    <button type="submit" class="send-button" [disabled]="inviteLoading || !isValidEmail">
                        <span *ngIf="!inviteLoading">Enviar Convite</span>
                        <span *ngIf="inviteLoading">Enviando...</span>
                    </button>
                </div>
            </form>
            <div *ngIf="inviteSuccessMessage" class="success-message">
                {{ inviteSuccessMessage }}
            </div>
        </div>
    </div>
</div>