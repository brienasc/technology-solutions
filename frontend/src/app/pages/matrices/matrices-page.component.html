<app-header></app-header>
<app-accessibility-bar></app-accessibility-bar>

<div class="matrizes-title">
  <div class="matrizes-title-content">
    <h1>Matrizes</h1>
    <p>Gerencie matrizes e seus relacionamentos</p>
  </div>
</div>

<div class="matrizes-container" role="main" aria-label="Lista de Matrizes">
  <div class="table-container">
    <div class="controls-section">
      <div class="search-container">
        <div class="search-bar">
          <input
            type="text"
            placeholder="Pesquisar por nome da matriz..."
            [(ngModel)]="searchTerm"
            aria-label="Campo de pesquisa de matrizes por nome"
            (keyup.enter)="onBuscar()"
          />
          <button
            class="search-button"
            aria-label="Iniciar Pesquisa"
            (click)="onBuscar()"
          >
            <svg
              aria-hidden="true"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="currentColor"
            >
              <path
                fill-rule="evenodd"
                d="M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z"
                clip-rule="evenodd"
              />
            </svg>
          </button>
        </div>
      </div>

      <div class="buttons-container">
        <button
          class="export-button import-button"
          (click)="onImportMatrix()"
          aria-label="Importar Matriz"
        >
          <svg
            aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="currentColor"
          >
            <path d="M4 16v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2"></path>
            <path d="m7 10 5-5 5 5"></path>
            <path d="M12 5v9"></path>
          </svg>
          Importar Matriz
        </button>
      </div>
    </div>

    <div class="table-responsive">
      <app-matrices-table
        [data]="data"
        [columns]="columns"
        [loading]="loading"
        (rowAction)="onRowAction($event)"
      >
      </app-matrices-table>
    </div>

    <div class="pagination-container">
      <div class="pagination-info">
        <div class="items-per-page">
          <label for="itemsPerPage">Itens por página:</label>
          <select
            id="itemsPerPage"
            [(ngModel)]="itemsPerPage"
            (change)="onPageSizeChange()"
          >
            <option value="5">5</option>
            <option value="10">10</option>
            <option value="25">25</option>
            <option value="50">50</option>
          </select>
        </div>
      </div>

      <div class="pagination-range">
        <span
          >{{ getStartIndex() }} - {{ getEndIndex() }} de {{ totalItems }}</span
        >
      </div>

      <div class="pagination-controls">
        <button
          class="pagination-btn"
          [disabled]="currentPage === 1"
          (click)="goToPage(1)"
          title="Primeira página"
          aria-label="Ir para a primeira página"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path d="m11 17-5-5 5-5M18 17l-5-5 5-5" />
          </svg>
        </button>
        <button
          class="pagination-btn"
          [disabled]="currentPage === 1"
          (click)="goToPrevious()"
          title="Página anterior"
          aria-label="Ir para a página anterior"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path d="m15 18-6-6 6-6" />
          </svg>
        </button>
        <button
          class="pagination-btn"
          [disabled]="currentPage === totalPages"
          (click)="goToNext()"
          title="Próxima página"
          aria-label="Ir para a próxima página"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path d="m9 18 6-6-6-6" />
          </svg>
        </button>
        <button
          class="pagination-btn"
          [disabled]="currentPage === totalPages"
          (click)="goToPage(totalPages)"
          title="Última página"
          aria-label="Ir para a última página"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <path d="m6 17 5-5-5-5M13 17l5-5-5-5" />
          </svg>
        </button>
      </div>
    </div>
  </div>
</div>

<app-matrix-viewer-dialog></app-matrix-viewer-dialog>
<app-import-matrix-dialog></app-import-matrix-dialog>
